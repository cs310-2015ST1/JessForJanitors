<!DOCTYPE html>

{% load staticfiles %} <!-- New line -->



<html>
    <head>
        <link href="{% static 'css/bootstrap-fluid-adj.css'%} " rel="stylesheet">
        <link href="{% static 'css/bootstrap.min.css'%} " rel="stylesheet" media="screen">
        <link href="{% static 'css/bootstrap-responsive.css' %}" rel="stylesheet">
        <link href="{% static 'css/style.css' %}" rel="stylesheet">
        
        <title>Artly</title>
            
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas {float: left; height: 500px; width: 50%;}
    </style>
    <script type="text/javascript"
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDnfkZ8FnyCfBkLpC6qCPEZpe_wLpT1lmE&sensor=false">
    </script>
    <script type="text/javascript">
      var map;
      
      function plotPosition(position) {
    	userPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

        var mapOptions = {
          center: userPosition,
          zoom: 12
        };

        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        var center = new google.maps.Circle({
          strokeColor: '#FF0000',
          strokeOpacity: 0.3,
          fillColor: '#FF0000',
          fillOpacity: 0.3,
          map: map,
          center: map.getCenter(),
          radius: 2000,
        })

        {% for artinstallation in artinstallations %}
        var marker = new google.maps.Marker({
          position: {lat: {{artinstallation.lat}}, lng: {{artinstallation.lon}}},
          icon: {
            path: google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,
            scale: 3,
            strokeColor: "darkmagenta"
          },
          map: map
        })
        {% endfor %}

	  }
	  
      function initialize() {

        if (navigator.geolocation) {
        	navigator.geolocation.getCurrentPosition(plotPosition);
   		} else {
   			window.alert("Geolocation is not supported by this browser.");
		}

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    </head>
    <body>
    	<div id="header">
        <h1>Artly</h1>
        <h4>explore Vancouver through public art</h4>
        </div>
        <div class="container">
            {% if artinstallations %}
            
            <div id="content">
            <div id="map-canvas"></div>
            <div id="datatable">
            <table class="table table-hover"
               data-toggle="table"
               data-click-to-select="true"
               data-single-select="true">
                <tr>
                    <th class="span1">Select</th>
                    <th class="span1">Name</th>
                    <th class="span1">Location</th>
                    <th class="span1">Distance</th>
                    <th class="span1">Info</th>
                </tr>
                {% for artinstallation in artinstallations %}
                    <td><input type="checkbox" /></td>
                    <td>{{ artinstallation.name }}</td>
                    <td>
                        <a href="https://www.google.com/maps/preview/@{{ artinstallation.lat }},{{ artinstallation.lon }},15z">
                            {{ artinstallation.lat }}, {{ artinstallation.lon }}
                        </a>
                    </td>
                    <td> 4.5km </td>
                    <td><a href="{{ artinstallation.url }}"> â†’ </a></td>
                </tr>
                {% endfor %}
            </table>
            </div>
            </div>
            {% else %}
                <strong>There are no installations to present.</strong>
            {% endif %}
        </div>
    </body>
 
</html>

<!-- See http://bootstrap-table.wenzhixin.net.cn/examples/
Search for checkbox select -->
